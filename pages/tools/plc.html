<h2>PLC Simulator</h2>
<p>Select a PLC programming language to view an example:</p>

<select id="plcSelector" onchange="switchPLCCode()">
    <option value="ladder">Ladder Logic (LD)</option>
    <option value="structured_text">Structured Text (ST)</option>
    <option value="fbd">Function Block Diagram (FBD)</option>
</select>

<pre id="ladder" class="plc-code"><code class="language-text">
    // Simple Start/Stop Circuit (Ladder Logic)
    ( )  --[ ]--( )  Start Button
    ( )  --[\]--( )  Stop Button
    ( )  --[ ]--( )  Motor Output
</code></pre>

<pre id="structured_text" class="plc-code" style="display:none;"><code class="language-text">
    // Equivalent Structured Text (ST)
    IF Start_Button THEN
        Motor := TRUE;
    END_IF;

    IF Stop_Button THEN
        Motor := FALSE;
    END_IF;
</code></pre>

<pre id="fbd" class="plc-code" style="display:none;"><code class="language-text">
    // Function Block Diagram (FBD)
    (Start_Button) ---> [ OR ] ---> (Motor)
    (Motor)        ---> [ AND ] ---> (Motor)
    (Stop_Button)  ---> [ NOT ] ---> (AND)
</code></pre>

<!-- Logic Gate Simulator -->
<h3>Logic Gate Simulator</h3>
<p>Test basic AND, OR, and NOT gate logic:</p>

<label>A: <input type="checkbox" id="inputA"></label>
<label>B: <input type="checkbox" id="inputB"></label>

<p><strong>AND Output:</strong> <span id="andResult">-</span></p>
<p><strong>OR Output:</strong> <span id="orResult">-</span></p>
<p><strong>NOT A Output:</strong> <span id="notAResult">-</span></p>

<!-- External PLC Information Link -->
<p style="margin-top: 20px; text-align: center;">
    Learn more about <a href="https://www.paessler.com/it-explained/plc" target="_blank" style="color: #FFD700; text-decoration: none;">
        PLCs and their applications</a>.
</p>

<script src="/js/plc.js" defer></script>
<script>
    // Ensure logic gate simulator updates live
    document.addEventListener("DOMContentLoaded", function () {
        console.log("âœ… Initializing live logic gate simulator.");
        
        function simulateLogic() {
            console.log("ðŸ”„ Running logic gate simulation...");
            
            const inputA = document.getElementById("inputA").checked;
            const inputB = document.getElementById("inputB").checked;

            document.getElementById("andResult").textContent = inputA && inputB ? "ON" : "OFF";
            document.getElementById("orResult").textContent = inputA || inputB ? "ON" : "OFF";
            document.getElementById("notAResult").textContent = !inputA ? "ON" : "OFF";
        }

        // Attach event listeners for live updates
        document.getElementById("inputA").addEventListener("change", simulateLogic);
        document.getElementById("inputB").addEventListener("change", simulateLogic);

        // Run simulation on page load (in case checkboxes are preselected)
        simulateLogic();
    });
</script>
